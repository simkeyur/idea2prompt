<!-- index.html -->
<!DOCTYPE html>
<html lang="en" data-bs-theme="dark">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Idea2Prompt</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css"
      rel="stylesheet"
    />
    <link href="assets/styles.css" rel="stylesheet" />
    <link rel="manifest" href="assets/manifest.json" />
    <meta name="theme-color" content="#000000" />

  </head>
  <body>
    <header>
      <h1 class="fs-5 mb-0">ðŸª„ Idea2Prompt</h1>
      <button id="themeToggle" class="btn btn-outline-light btn-sm">
        <i class="bi bi-circle-half"></i>
      </button>
    </header>

    <main>
      <!-- Left Column -->
      <div class="input-panel">
        <div class="mb-3">
          <label for="provider" class="form-label">Choose Backend</label>
          <select class="form-select" id="provider">
            <option value="ollama">Ollama</option>
            <option value="gemini" selected>Gemini</option>
          </select>
        </div>

        <div id="ollamaFields" class="d-none">
          <div class="mb-3 d-flex">
            <div class="flex-grow-1 me-2">
              <label class="form-label">Ollama Base URL</label>
              <input
                type="text"
                id="ollamaUrl"
                class="form-control"
                value="http://localhost:11434"
              />
            </div>
            <div class="align-self-end mb-1">
              <button id="refreshModels" class="btn btn-outline-warning btn-sm">
                <i class="bi bi-arrow-clockwise"></i>
              </button>
            </div>
          </div>
          <div class="mb-3">
            <label class="form-label">Model</label>
            <select id="ollamaModel" class="form-select"></select>
          </div>
        </div>

        <div id="geminiFields">
          <div class="mb-3">
            <label class="form-label">Gemini API Key</label>
            <input type="password" id="geminiKey" class="form-control" />
            <div class="form-text">
              You can create your Gemini API key at
              <a href="https://aistudio.google.com/app/apikey" target="_blank">aistudio.google.com/app/apikey</a>.
            </div>
          </div>
        </div>


        <div class="mb-3">
          <label class="form-label">Your Idea</label>
          <textarea id="userPrompt" class="form-control" rows="6" placeholder="Enter rough idea..."></textarea>
        </div>

        <div class="d-grid mt-auto">
          <button id="refineBtn" class="btn btn-outline-success">
            <i class="bi bi-stars"></i> Refine Prompt
          </button>
        </div>
      </div>

      <!-- Right Column -->
      <div class="output-panel">
        <div class="copy-container">
          <label class="form-label mb-0">Refined Prompt</label>
          <button id="copyBtn" class="btn btn-outline-info btn-sm">
            <i class="bi bi-clipboard"></i> Copy
          </button>
        </div>
        <pre id="outputBox" class="form-control"></pre>
      </div>
    </main>

    <div class="toast-container">
      <div
        id="copyToast"
        class="toast text-bg-success border-0 align-items-center"
        role="alert"
        aria-live="assertive"
        aria-atomic="true"
      >
        <div class="d-flex">
          <div class="toast-body">Copied to clipboard!</div>
          <button
            type="button"
            class="btn-close btn-close-white me-2 m-auto"
            data-bs-dismiss="toast"
            aria-label="Close"
          ></button>
        </div>
      </div>
    </div>

    <script type="module" src="scripts/script.js"></script>
    <script>
      //PWA
      if ('serviceWorker' in navigator) {
          navigator.serviceWorker
            .register('./sw.js')
            .then(() => console.log('âœ… Service Worker registered'))
            .catch((err) => console.error('Service Worker registration failed:', err));
        }
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
